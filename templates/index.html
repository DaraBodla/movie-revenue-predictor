<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Movie Intelligence • Predictor</title>
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <div class="bgGlow"></div>

  <div class="container">
    <header class="topbar">
      <div class="brand">
        <div class="logo">MI</div>
        <div>
          <h1>Movie Intelligence</h1>
          <p class="sub">Revenue prediction, hit or flop classification, and clustering insights.</p>
        </div>
      </div>

      <div class="topbarRight">
        <span class="pill">FastAPI</span>
        <span class="pill">Docker</span>
        <span class="pill">CI/CD</span>
        <span id="healthPill" class="pill pill-muted">Health: —</span>
      </div>
    </header>

    <main class="grid2">
      <!-- LEFT: Inputs -->
      <section class="card">
        <div class="cardHead">
          <div>
            <h2>Inputs</h2>
            <div class="muted">All values are numeric</div>
          </div>
          <div class="headBtns">
            <button id="btnSample" class="iconBtn" title="Fill a sample input">Sample</button>
            <button id="btnReset" class="iconBtn" title="Reset to defaults">Reset</button>
          </div>
        </div>

        <div class="formGrid">
          <div class="field">
            <label>Budget (USD)</label>
            <input id="budget" type="number" min="1" step="1" value="50000000" />
            <div class="hint">Production budget (and optionally marketing if included)</div>
          </div>

          <div class="field">
            <label>Popularity</label>
            <input id="popularity" type="number" min="0" step="0.01" value="12.3" />
            <div class="hint">Public interest proxy (TMDB style)</div>
          </div>

          <div class="field">
            <label>Runtime (minutes)</label>
            <input id="runtime" type="number" min="1" step="1" value="110" />
            <div class="hint">Final cut duration</div>
          </div>

          <div class="field">
            <label>Vote Average (0–10)</label>
            <input id="vote_average" type="number" min="0" max="10" step="0.1" value="7.1" />
            <div class="hint">Early viewer rating (post release)</div>
          </div>

          <div class="field">
            <label>Vote Count</label>
            <input id="vote_count" type="number" min="0" step="1" value="3400" />
            <div class="hint">Number of submitted ratings (post release)</div>
          </div>

          <div class="field">
            <label>Release Month (1–12)</label>
            <input id="release_month" type="number" min="1" max="12" step="1" value="7" />
            <div class="hint">Captures seasonality</div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="segmented">
          <button class="segBtn active" data-mode="all">All</button>
          <button class="segBtn" data-mode="revenue">Revenue</button>
          <button class="segBtn" data-mode="classify">Hit/Flop</button>
          <button class="segBtn" data-mode="cluster">Cluster</button>
        </div>

        <div class="actions">
          <button id="btnAll" class="btn primary wide">
            <span>Predict All</span>
            <span class="kbd">POST ×3</span>
          </button>

          <button id="btnRevenue" class="btn">
            <span>Revenue</span>
            <span class="kbd">POST</span>
          </button>

          <button id="btnClassify" class="btn">
            <span>Hit/Flop</span>
            <span class="kbd">POST</span>
          </button>

          <button id="btnCluster" class="btn">
            <span>Cluster</span>
            <span class="kbd">POST</span>
          </button>

          <button id="btnHealth" class="btn ghost">
            <span>Check Health</span>
            <span class="kbd">GET</span>
          </button>
        </div>

        <details class="advanced">
          <summary>Advanced</summary>

          <div class="field">
            <label>Optional API Key (X-API-Key)</label>
            <input id="api_key" type="password" placeholder="Leave empty if not enabled" />
            <div class="hint">Only required if API key is enabled on the server</div>
          </div>

          <div class="field">
            <label>Base URL</label>
            <input id="base_url" type="text" value="" placeholder="Leave empty for same origin" />
            <div class="hint">Use if UI is hosted separately (e.g., http://localhost:8000)</div>
          </div>
        </details>
      </section>

      <!-- RIGHT: Results -->
      <section class="card">
        <div class="cardHead">
          <h2>Results</h2>
          <div class="statusRow">
            <span id="statusBadge" class="badge idle">Idle</span>
            <button id="btnCopy" class="iconBtn" title="Copy result JSON">Copy</button>
            <button id="btnDownload" class="iconBtn" title="Download result as JSON">Download</button>
          </div>
        </div>

        <div id="resultCards" class="resultCards">
          <div class="resultCard mutedCard">
            <div class="resultTitle">Tip</div>
            <div class="resultBody">Press Predict All for a complete output in one click.</div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="jsonBlock">
          <div class="jsonHead">
            <span class="muted">Raw JSON</span>
            <span id="latency" class="muted"></span>
          </div>
          <pre id="output" class="output">Run a prediction to see results…</pre>
        </div>
      </section>
    </main>

    <footer class="footer">
      <span class="muted">UI: <code>/ui</code> • Docs: <code>/docs</code></span>
    </footer>
  </div>

  <div id="toast" class="toast hidden"></div>
  <script src="/static/app.js"></script>
</body>
</html>
